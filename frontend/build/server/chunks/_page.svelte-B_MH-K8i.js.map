{"version":3,"file":"_page.svelte-B_MH-K8i.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/image-resize/_page.svelte.js"],"sourcesContent":["import { Q as head, B as pop, z as push, C as escape_html, J as attr, M as attr_style, R as store_get, S as unsubscribe_stores } from \"../../../chunks/index.js\";\nimport { t as tick, o as onDestroy } from \"../../../chunks/index-server.js\";\nimport { i as imageEditorStore, I as ImageEditorLayout } from \"../../../chunks/ImageEditorLayout.js\";\nimport { F as FileManagementSidebar, H as HistoryControlsSidebar, D as DownloadSidebar } from \"../../../chunks/DownloadSidebar.js\";\nfunction _page($$payload, $$props) {\n  push();\n  var $$store_subs;\n  let isValidInput, canApplyResize, displayError;\n  const MAX_DIMENSION = 5e3;\n  let targetWidth = \"\";\n  let targetHeight = \"\";\n  let keepAspectRatio = true;\n  let imageUUID, imageUrl, isLoading, isApplying, originalDimensions, storeErrorMessage;\n  const unsubscribeStore = imageEditorStore.subscribe((state) => {\n    imageUUID = state.imageUUID;\n    imageUrl = state.imageUrl;\n    isLoading = state.isLoading;\n    isApplying = state.isApplying;\n    storeErrorMessage = state.errorMessage;\n    if (originalDimensions !== state.originalDimensions) {\n      originalDimensions = state.originalDimensions;\n      if (originalDimensions) {\n        initializeTargetDimensions(originalDimensions.width, originalDimensions.height);\n      } else {\n        targetWidth = \"\";\n        targetHeight = \"\";\n      }\n    }\n  });\n  function initializeTargetDimensions(origW, origH) {\n    if (!origW || !origH) return;\n    let w = Math.max(1, Math.min(origW, MAX_DIMENSION));\n    let h = Math.max(1, Math.min(origH, MAX_DIMENSION));\n    const ratio = origW / origH;\n    if (origW > MAX_DIMENSION || origH > MAX_DIMENSION) {\n      if (w > h) {\n        w = MAX_DIMENSION;\n        h = Math.max(1, Math.round(w / ratio));\n        h = Math.min(h, MAX_DIMENSION);\n      } else {\n        h = MAX_DIMENSION;\n        w = Math.max(1, Math.round(h * ratio));\n        w = Math.min(w, MAX_DIMENSION);\n      }\n    }\n    targetWidth = w;\n    targetHeight = h;\n    tick().then(() => false);\n  }\n  onDestroy(() => {\n    unsubscribeStore();\n    imageEditorStore.cleanupBlobUrl();\n  });\n  isValidInput = typeof targetWidth === \"number\" && targetWidth > 0 && targetWidth <= MAX_DIMENSION && typeof targetHeight === \"number\" && targetHeight > 0 && targetHeight <= MAX_DIMENSION;\n  canApplyResize = !!imageUUID && !!originalDimensions && !isLoading && !isApplying && isValidInput;\n  displayError = storeErrorMessage;\n  head($$payload, ($$payload2) => {\n    $$payload2.title = `<title>Image Resizer - Slurp Tools</title>`;\n  });\n  ImageEditorLayout($$payload, {\n    toolTitle: \"Image Resizer\",\n    toolDescription: \"Select an image to resize it.\",\n    $$slots: {\n      \"toolbar-left\": ($$payload2) => {\n        $$payload2.out += `<div slot=\"toolbar-left\" class=\"svelte-1q20jju\"><span class=\"toolbar-label svelte-1q20jju\">Resizer</span></div>`;\n      },\n      \"toolbar-right\": ($$payload2) => {\n        $$payload2.out += `<div slot=\"toolbar-right\" class=\"svelte-1q20jju\"><button class=\"apply-button button-like toolbar-button svelte-1q20jju\"${attr(\"disabled\", !canApplyResize, true)}${attr(\"title\", canApplyResize ? \"Apply new dimensions\" : \"Enter valid dimensions below\")}>`;\n        if (isApplying) {\n          $$payload2.out += \"<!--[-->\";\n          $$payload2.out += `<span class=\"button-spinner svelte-1q20jju\"></span> Applying...`;\n        } else {\n          $$payload2.out += \"<!--[!-->\";\n          $$payload2.out += `Apply Resize`;\n        }\n        $$payload2.out += `<!--]--></button></div>`;\n      },\n      \"main-content\": ($$payload2) => {\n        $$payload2.out += `<div slot=\"main-content\" class=\"resize-main-content svelte-1q20jju\">`;\n        if (imageUrl) {\n          $$payload2.out += \"<!--[-->\";\n          $$payload2.out += `<div class=\"img-container svelte-1q20jju\"><img${attr(\"src\", imageUrl)}${attr(\"alt\", store_get($$store_subs ??= {}, \"$imageEditorStore\", imageEditorStore).originalFilename || \"Image to resize\")}${attr(\"key\", imageUrl)} class=\"preview-image svelte-1q20jju\"${attr_style(\"\", { opacity: isLoading ? 0.5 : 1 })}></div>`;\n        } else if (!isLoading) {\n          $$payload2.out += \"<!--[1-->\";\n          $$payload2.out += `<p class=\"placeholder-text svelte-1q20jju\">Select an image to start.</p>`;\n        } else {\n          $$payload2.out += \"<!--[!-->\";\n        }\n        $$payload2.out += `<!--]--></div>`;\n      },\n      \"sidebar-content\": ($$payload2, { openFilePicker }) => {\n        {\n          FileManagementSidebar($$payload2, {});\n          $$payload2.out += `<!----> <div class=\"sidebar-section section-resize svelte-1q20jju\"><h4 class=\"h4-pink svelte-1q20jju\">Resize Dimensions</h4> `;\n          if (originalDimensions) {\n            $$payload2.out += \"<!--[-->\";\n            $$payload2.out += `<p class=\"original-dims-info svelte-1q20jju\">Current: ${escape_html(originalDimensions.width)} x ${escape_html(originalDimensions.height)} px</p> <div class=\"dimension-inputs svelte-1q20jju\"><div class=\"input-group svelte-1q20jju\"><label for=\"width\" class=\"svelte-1q20jju\">Width (px)</label> <input type=\"number\" id=\"width\"${attr(\"value\", targetWidth)} min=\"1\"${attr(\"max\", MAX_DIMENSION)}${attr(\"disabled\", isLoading || isApplying || !originalDimensions, true)} placeholder=\"Width\" class=\"svelte-1q20jju\"></div> <div class=\"input-group svelte-1q20jju\"><label for=\"height\" class=\"svelte-1q20jju\">Height (px)</label> <input type=\"number\" id=\"height\"${attr(\"value\", targetHeight)} min=\"1\"${attr(\"max\", MAX_DIMENSION)}${attr(\"disabled\", isLoading || isApplying || !originalDimensions, true)} placeholder=\"Height\" class=\"svelte-1q20jju\"></div></div> <div class=\"aspect-toggle svelte-1q20jju\"><label title=\"Maintain aspect ratio when changing dimensions\" class=\"svelte-1q20jju\"><input type=\"checkbox\"${attr(\"checked\", keepAspectRatio, true)}${attr(\"disabled\", isLoading || isApplying || !originalDimensions, true)} class=\"svelte-1q20jju\"> <span class=\"svelte-1q20jju\">Lock aspect ratio</span></label></div>`;\n          } else if (imageUUID && isLoading) {\n            $$payload2.out += \"<!--[1-->\";\n            $$payload2.out += `<p class=\"placeholder-text svelte-1q20jju\">Loading dimensions...</p>`;\n          } else {\n            $$payload2.out += \"<!--[!-->\";\n            $$payload2.out += `<p class=\"placeholder-text svelte-1q20jju\">Load an image to see dimensions.</p>`;\n          }\n          $$payload2.out += `<!--]--></div> `;\n          HistoryControlsSidebar($$payload2, {});\n          $$payload2.out += `<!----> `;\n          DownloadSidebar($$payload2);\n          $$payload2.out += `<!----> `;\n          if (displayError) {\n            $$payload2.out += \"<!--[-->\";\n            $$payload2.out += `<div class=\"sidebar-error-container svelte-1q20jju\"><p class=\"error-message sidebar-error svelte-1q20jju\">${escape_html(displayError)}</p></div>`;\n          } else {\n            $$payload2.out += \"<!--[!-->\";\n          }\n          $$payload2.out += `<!--]-->`;\n        }\n      }\n    }\n  });\n  if ($$store_subs) unsubscribe_stores($$store_subs);\n  pop();\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":"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"}