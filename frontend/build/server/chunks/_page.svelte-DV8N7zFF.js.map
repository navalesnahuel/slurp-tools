{"version":3,"file":"_page.svelte-DV8N7zFF.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/image-crop/_page.svelte.js"],"sourcesContent":["import { Q as head, B as pop, z as push, C as escape_html, J as attr, M as attr_style, R as store_get, K as attr_class, S as unsubscribe_stores } from \"../../../chunks/index.js\";\nimport { o as onDestroy } from \"../../../chunks/index-server.js\";\nimport { i as imageEditorStore, I as ImageEditorLayout } from \"../../../chunks/ImageEditorLayout.js\";\nimport { F as FileManagementSidebar, H as HistoryControlsSidebar, D as DownloadSidebar } from \"../../../chunks/DownloadSidebar.js\";\nimport { d as destroyCropperInstance } from \"../../../chunks/cropperUtils.js\";\nfunction _page($$payload, $$props) {\n  push();\n  var $$store_subs;\n  let canControlCropper, canApply;\n  let cropperInstance = null;\n  let zoom = 100;\n  let aspectRatioLabel = \"Free\";\n  let croppedAreaPixels = null;\n  let imageUUID, imageUrl, isLoading, isApplying, errorMessage;\n  const unsubscribeStore = imageEditorStore.subscribe((state) => {\n    if (imageUrl !== state.imageUrl && state.imageUrl) {\n      cropperInstance = destroyCropperInstance(cropperInstance);\n      croppedAreaPixels = null;\n      imageUrl = state.imageUrl;\n    } else if (!state.imageUrl && cropperInstance) {\n      cropperInstance = destroyCropperInstance(cropperInstance);\n      croppedAreaPixels = null;\n      imageUrl = state.imageUrl;\n    }\n    if (imageUUID !== state.imageUUID) imageUUID = state.imageUUID;\n    if (isLoading !== state.isLoading) isLoading = state.isLoading;\n    if (isApplying !== state.isApplying) isApplying = state.isApplying;\n    if (errorMessage !== state.errorMessage) errorMessage = state.errorMessage;\n  });\n  onDestroy(() => {\n    unsubscribeStore();\n    cropperInstance = destroyCropperInstance(cropperInstance);\n    imageEditorStore.cleanupBlobUrl();\n  });\n  canControlCropper = !!cropperInstance && !isLoading && !isApplying;\n  canApply = canControlCropper && !!croppedAreaPixels && croppedAreaPixels.width > 0 && croppedAreaPixels.height > 0;\n  head($$payload, ($$payload2) => {\n    $$payload2.title = `<title>Crop Image - Slurp Tools</title>`;\n  });\n  ImageEditorLayout($$payload, {\n    toolTitle: \"Image Cropper\",\n    toolDescription: \"Select an image, adjust the selection, and apply the crop.\",\n    $$slots: {\n      \"toolbar-left\": ($$payload2) => {\n        $$payload2.out += `<div slot=\"toolbar-left\" class=\"svelte-n07j1b\"><span class=\"toolbar-label svelte-n07j1b\">Aspect Ratio:</span> <div class=\"aspect-ratio-controls svelte-n07j1b\"><button${attr(\"disabled\", !canControlCropper, true)}${attr_class(\"svelte-n07j1b\", void 0, { \"active\": aspectRatioLabel === \"Free\" })}>Free</button> <button${attr(\"disabled\", !canControlCropper, true)}${attr_class(\"svelte-n07j1b\", void 0, { \"active\": aspectRatioLabel === \"1:1\" })}>1:1</button> <button${attr(\"disabled\", !canControlCropper, true)}${attr_class(\"svelte-n07j1b\", void 0, { \"active\": aspectRatioLabel === \"4:3\" })}>4:3</button> <button${attr(\"disabled\", !canControlCropper, true)}${attr_class(\"svelte-n07j1b\", void 0, { \"active\": aspectRatioLabel === \"16:9\" })}>16:9</button></div></div>`;\n      },\n      \"toolbar-right\": ($$payload2) => {\n        $$payload2.out += `<div slot=\"toolbar-right\" class=\"svelte-n07j1b\"><button class=\"apply-button button-like toolbar-button svelte-n07j1b\"${attr(\"disabled\", !canApply, true)}>`;\n        if (isApplying) {\n          $$payload2.out += \"<!--[-->\";\n          $$payload2.out += `<span class=\"button-spinner svelte-n07j1b\"></span> Applying...`;\n        } else {\n          $$payload2.out += \"<!--[!-->\";\n          $$payload2.out += `Apply Crop`;\n        }\n        $$payload2.out += `<!--]--></button></div>`;\n      },\n      \"main-content\": ($$payload2) => {\n        $$payload2.out += `<div slot=\"main-content\" class=\"cropper-main-content svelte-n07j1b\">`;\n        if (imageUrl) {\n          $$payload2.out += \"<!--[-->\";\n          $$payload2.out += `<div class=\"cropper-container svelte-n07j1b\"><img${attr(\"src\", imageUrl)}${attr(\"alt\", store_get($$store_subs ??= {}, \"$imageEditorStore\", imageEditorStore).originalFilename || \"Image to crop\")}${attr(\"key\", imageUrl)} class=\"crop-image svelte-n07j1b\" crossorigin=\"anonymous\"${attr_style(\"\", {\n            opacity: isLoading && !cropperInstance ? 0.5 : 1\n          })}></div>`;\n        } else if (!isLoading) {\n          $$payload2.out += \"<!--[1-->\";\n          $$payload2.out += `<p class=\"placeholder-text svelte-n07j1b\">Select an image to start.</p>`;\n        } else {\n          $$payload2.out += \"<!--[!-->\";\n        }\n        $$payload2.out += `<!--]--></div>`;\n      },\n      \"sidebar-content\": ($$payload2, { openFilePicker }) => {\n        {\n          FileManagementSidebar($$payload2, {});\n          $$payload2.out += `<!----> <div class=\"sidebar-section section-details svelte-n07j1b\"><h4 class=\"h4-pink svelte-n07j1b\">Current Selection</h4> `;\n          if (croppedAreaPixels && canControlCropper) {\n            $$payload2.out += \"<!--[-->\";\n            $$payload2.out += `<div class=\"details-grid svelte-n07j1b\"><span class=\"svelte-n07j1b\">W:</span> <span class=\"svelte-n07j1b\">${escape_html(croppedAreaPixels.width)}px</span> <span class=\"svelte-n07j1b\">H:</span> <span class=\"svelte-n07j1b\">${escape_html(croppedAreaPixels.height)}px</span> <span class=\"svelte-n07j1b\">X:</span> <span class=\"svelte-n07j1b\">${escape_html(croppedAreaPixels.x)}px</span> <span class=\"svelte-n07j1b\">Y:</span> <span class=\"svelte-n07j1b\">${escape_html(croppedAreaPixels.y)}px</span></div>`;\n          } else if (imageUUID && !isLoading && !isApplying) {\n            $$payload2.out += \"<!--[1-->\";\n            $$payload2.out += `<p class=\"placeholder-text-small svelte-n07j1b\">Initializing crop area...</p>`;\n          } else if (isLoading) {\n            $$payload2.out += \"<!--[2-->\";\n            $$payload2.out += `<p class=\"placeholder-text-small svelte-n07j1b\">Loading...</p>`;\n          } else {\n            $$payload2.out += \"<!--[!-->\";\n            $$payload2.out += `<p class=\"placeholder-text-small svelte-n07j1b\">No selection.</p>`;\n          }\n          $$payload2.out += `<!--]--></div> <div class=\"sidebar-section section-controls svelte-n07j1b\"><h4 class=\"h4-teal svelte-n07j1b\">Controls</h4> <div class=\"control-item zoom-controls svelte-n07j1b\"><label for=\"zoom-slider\" class=\"svelte-n07j1b\">Zoom</label> <input id=\"zoom-slider\" type=\"range\" min=\"1\" max=\"500\" step=\"1\"${attr(\"value\", zoom)} class=\"zoom-slider svelte-n07j1b\"${attr(\"disabled\", !canControlCropper, true)}> <span class=\"zoom-value svelte-n07j1b\">${escape_html(zoom)}%</span></div></div> `;\n          HistoryControlsSidebar($$payload2, {});\n          $$payload2.out += `<!----> `;\n          DownloadSidebar($$payload2);\n          $$payload2.out += `<!---->`;\n        }\n      }\n    }\n  });\n  if ($$store_subs) unsubscribe_stores($$store_subs);\n  pop();\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":"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"}