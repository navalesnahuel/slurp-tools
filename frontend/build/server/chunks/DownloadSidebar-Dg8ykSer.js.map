{"version":3,"file":"DownloadSidebar-Dg8ykSer.js","sources":["../../../.svelte-kit/adapter-node/chunks/DownloadSidebar.js"],"sourcesContent":["import { z as push, I as fallback, R as store_get, K as attr_class, J as attr, C as escape_html, S as unsubscribe_stores, N as bind_props, B as pop, O as stringify } from \"./index.js\";\nimport { i as imageEditorStore } from \"./ImageEditorLayout.js\";\n/* empty css                                              */\nimport { o as onDestroy } from \"./index-server.js\";\nfunction truncateFilename(name, length = 25) {\n  if (!name) return \"\";\n  if (name.length <= length) return name;\n  const extIndex = name.lastIndexOf(\".\");\n  const ext = extIndex !== -1 ? name.substring(extIndex) : \"\";\n  const base = extIndex !== -1 ? name.substring(0, extIndex) : name;\n  const maxBaseLength = Math.max(0, length - ext.length - (ext.length > 0 ? 3 : 0));\n  if (maxBaseLength <= 0) {\n    return name.substring(0, length - 3) + \"...\";\n  }\n  const truncatedBase = base.length > maxBaseLength ? base.substring(0, maxBaseLength) : base;\n  return `${truncatedBase}...${ext}`;\n}\nfunction FileManagementSidebar($$payload, $$props) {\n  push();\n  var $$store_subs;\n  let originalFilename, imageUUID, isLoading, truncatedName, imageIdShort;\n  let extraClass = fallback($$props[\"extraClass\"], \"\");\n  ({ originalFilename, imageUUID, isLoading } = store_get($$store_subs ??= {}, \"$imageEditorStore\", imageEditorStore));\n  truncatedName = truncateFilename(originalFilename);\n  imageIdShort = imageUUID ? `${imageUUID.substring(0, 8)}...` : \"\";\n  $$payload.out += `<div${attr_class(`sidebar-section file-management ${stringify(extraClass)}`, \"svelte-1s4yqi3\")}>`;\n  if (originalFilename) {\n    $$payload.out += \"<!--[-->\";\n    $$payload.out += `<p class=\"filename svelte-1s4yqi3\"${attr(\"title\", originalFilename)}>${escape_html(truncatedName)}</p>`;\n  } else if (imageUUID) {\n    $$payload.out += \"<!--[1-->\";\n    $$payload.out += `<p class=\"filename svelte-1s4yqi3\">ID: ${escape_html(imageIdShort)}</p>`;\n  } else {\n    $$payload.out += \"<!--[!-->\";\n    $$payload.out += `<p class=\"placeholder-text svelte-1s4yqi3\">No image selected.</p>`;\n  }\n  $$payload.out += `<!--]--> <button class=\"button-like change-button svelte-1s4yqi3\"${attr(\"disabled\", isLoading, true)}>Change Image</button></div>`;\n  if ($$store_subs) unsubscribe_stores($$store_subs);\n  bind_props($$props, { extraClass });\n  pop();\n}\nfunction HistoryControlsSidebar($$payload, $$props) {\n  push();\n  let canUndo, canRedo;\n  let extraClass = fallback($$props[\"extraClass\"], \"\");\n  let imageUUID, isLoading, isApplying;\n  const unsubscribe = imageEditorStore.subscribe((state) => {\n    imageUUID = state.imageUUID;\n    isLoading = state.isLoading;\n    isApplying = state.isApplying;\n  });\n  onDestroy(unsubscribe);\n  canUndo = !!imageUUID && !isLoading && !isApplying;\n  canRedo = !!imageUUID && !isLoading && !isApplying;\n  $$payload.out += `<div${attr_class(`sidebar-section history-controls-section ${stringify(extraClass)}`, \"svelte-3dzuek\")}><div class=\"control-item history-controls svelte-3dzuek\"><button class=\"button-like history-button svelte-3dzuek\"${attr(\"disabled\", !canUndo, true)}${attr(\"title\", canUndo ? \"Undo\" : \"Nothing to undo\")}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\" class=\"svelte-3dzuek\"><path fill-rule=\"evenodd\" d=\"M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z\"></path><path d=\"M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z\"></path></svg> <span class=\"svelte-3dzuek\">Undo</span></button> <button class=\"button-like history-button svelte-3dzuek\"${attr(\"disabled\", !canRedo, true)}${attr(\"title\", canRedo ? \"Redo\" : \"Nothing to redo\")}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\" class=\"svelte-3dzuek\"><path fill-rule=\"evenodd\" d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z\"></path><path d=\"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36-1.966a.25.25 0 0 1 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z\"></path></svg> <span class=\"svelte-3dzuek\">Redo</span></button></div></div>`;\n  bind_props($$props, { extraClass });\n  pop();\n}\nfunction DownloadSidebar($$payload, $$props) {\n  push();\n  var $$store_subs;\n  let imageUUID, imageUrl, isLoading, isApplying, canDownload;\n  ({ imageUUID, imageUrl, isLoading, isApplying } = store_get($$store_subs ??= {}, \"$imageEditorStore\", imageEditorStore));\n  canDownload = !!imageUUID && !!imageUrl && !isLoading && !isApplying;\n  $$payload.out += `<div class=\"sidebar-section download-section svelte-ekmnog\"><button class=\"button-like save-button svelte-ekmnog\"${attr(\"disabled\", !canDownload, true)}>Download Image</button></div>`;\n  if ($$store_subs) unsubscribe_stores($$store_subs);\n  pop();\n}\nexport {\n  DownloadSidebar as D,\n  FileManagementSidebar as F,\n  HistoryControlsSidebar as H\n};\n"],"names":[],"mappings":"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"}