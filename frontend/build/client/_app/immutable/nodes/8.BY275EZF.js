import{t as k,a as w,b as le}from"../chunks/B9q02PmC.js";import"../chunks/CEYA472p.js";import{X as ee,Z as V,Y as l,q as _,Q as oe,_ as te,a3 as P,a2 as L,a4 as x,a5 as O,e as X,d as e,$ as ae,a1 as J,a0 as ne,a6 as K}from"../chunks/CkTvmw98.js";import{s as Y,e as D,h as ve}from"../chunks/l61C7KQG.js";import{i as F}from"../chunks/lPEFebrr.js";import{e as ce}from"../chunks/BUH9F0At.js";import{s as de,a as T}from"../chunks/B1tgAyqo.js";import{b as fe}from"../chunks/DBx-IR2N.js";import{i as se}from"../chunks/DNmyc9OO.js";import{c as me,a as ge}from"../chunks/DnHmEvXm.js";import{I as pe,E as ue}from"../chunks/D7iErLRr.js";import{p as q}from"../chunks/BoBM9_cA.js";import{i as be}from"../chunks/D2J15UbQ.js";var he=k('<div><img class="preview-thumbnail svelte-12rlkzt"> <p class="preview-filename svelte-12rlkzt"> </p> <div class="preview-controls svelte-12rlkzt"><button class="control-button move-button svelte-12rlkzt" title="Move Up"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="svelte-12rlkzt"><path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5"></path></svg></button> <button class="control-button move-button svelte-12rlkzt" title="Move Down"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="svelte-12rlkzt"><path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1"></path></svg></button> <button class="control-button remove-button svelte-12rlkzt" title="Remove Image"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="svelte-12rlkzt"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"></path><path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"></path></svg></button></div></div>');function we(N,z){ee(z,!1);const v=_();let h=q(z,"preview",8),E=q(z,"isFirst",8,!1),G=q(z,"isLast",8,!1),y=q(z,"disabled",8,!1);const s=me();function B($){s("move",{id:h().id,direction:$})}function c(){s("remove",{id:h().id})}V(()=>oe(h()),()=>{l(v,h().file.name.length>20?h().file.name.substring(0,18)+"...":h().file.name)}),te(),se();var f=he();let r;var U=P(f),R=L(U,2),Q=P(R,!0);x(R);var H=L(R,2),j=P(H),C=L(j,2),S=L(C,2);x(H),x(f),O($=>{r=de(f,1,"preview-item svelte-12rlkzt",null,r,$),T(U,"src",h().previewUrl),T(U,"alt",h().file.name),T(U,"title",h().file.name),T(R,"title",h().file.name),Y(Q,e(v)),j.disabled=E()||y(),C.disabled=G()||y(),S.disabled=y()},[()=>({disabled:y()})],X),D("click",j,()=>B("up")),D("click",C,()=>B("down")),D("click",S,c),w(N,f),ae()}var _e=k('<div slot="toolbar-left" class="svelte-1slf5cd"><span class="toolbar-label svelte-1slf5cd">PDF Generator</span></div>'),ke=k('<span class="button-spinner svelte-1slf5cd"></span> Generating...',1),Ie=k('<span class="button-spinner svelte-1slf5cd"></span> Loading...',1),xe=k('<div slot="toolbar-right" class="svelte-1slf5cd"><button class="button-like apply-button toolbar-button svelte-1slf5cd"><!></button></div>'),ye=k('<div class="main-area-overlay svelte-1slf5cd"><div class="spinner svelte-1slf5cd"></div> <p class="svelte-1slf5cd">Adding images...</p></div>'),Pe=k('<div class="preview-grid svelte-1slf5cd"></div>'),Le=k('<p class="placeholder-text svelte-1slf5cd">No images selected yet. Click "Add More Images".</p>'),Ue=k('<div slot="main-content" class="pdf-main-area svelte-1slf5cd"><!> <!></div>'),ze=k('<div class="sidebar-section section-actions svelte-1slf5cd"><h4 class="h4-lavender svelte-1slf5cd">Manage Images</h4> <div class="sidebar-button-group svelte-1slf5cd"><button class="button-like add-more-button svelte-1slf5cd">Add More Images</button> <button class="button-like clear-button svelte-1slf5cd"> </button></div></div> <!>',1),Me=k('<!> <input type="file" id="file-input-pdf" accept="image/png, image/jpeg, image/webp, image/gif, image/bmp, image/tiff" style="display: none;" multiple class="svelte-1slf5cd">',1);function He(N,z){ee(z,!1);const v=_(),h=_(),E=_(),G=_(),y=_();let s=_([]),B=0,c=_(!1),f=_(""),r=_(!1),U=_();async function R(t){const m=t.target,i=m.files;if(!(!i||i.length===0)){l(r,!0),l(f,""),await new Promise(a=>setTimeout(a,50));try{const a=[];for(const o of i){if(!o.type.startsWith("image/")||e(s).some(u=>u.file.name===o.name&&u.file.size===o.size))continue;const d=URL.createObjectURL(o);a.push({id:B++,file:o,previewUrl:d})}l(s,[...e(s),...a])}catch(a){l(f,`Error loading images: ${a.message}`)}finally{l(r,!1),m&&(m.value=null)}}}function Q(){var t;e(r)||e(c)||(t=e(U))==null||t.click()}function H(t){if(e(c))return;const m=t.detail.id,i=e(s).find(a=>a.id===m);i!=null&&i.previewUrl&&URL.revokeObjectURL(i.previewUrl),l(s,e(s).filter(a=>a.id!==m))}function j(t){if(e(c))return;const{id:m,direction:i}=t.detail,a=e(s).findIndex(u=>u.id===m);if(a===-1)return;const o=i==="up"?a-1:a+1;if(o<0||o>=e(s).length)return;const d=[...e(s)];[d[a],d[o]]=[d[o],d[a]],l(s,d)}function C(){e(c)||e(r)||(e(s).forEach(t=>{t.previewUrl&&URL.revokeObjectURL(t.previewUrl)}),l(s,[]),l(f,""))}async function S(){if(!(e(s).length===0||e(c)||e(r))){l(c,!0),l(f,"");try{const t=e(s).map(m=>m.file);await be(t)}catch(t){l(f,`Error generating PDF: ${t.message||"Unknown error"}`)}finally{l(c,!1)}}}ge(()=>{e(s).forEach(t=>{t.previewUrl&&URL.revokeObjectURL(t.previewUrl)})}),V(()=>e(s),()=>{l(v,e(s).length>0)}),V(()=>(e(v),e(r)),()=>{l(h,!e(v)&&!e(r))}),V(()=>(e(v),e(r)),()=>{l(E,e(v)||e(r))}),V(()=>(e(v),e(c),e(r)),()=>{l(G,e(v)&&!e(c)&&!e(r))}),V(()=>(e(c),e(r)),()=>{l(y,e(c)||e(r))}),te(),se();var $=Me();ve(t=>{ne.title="Image to PDF Generator"});var Z=J($);pe(Z,{toolTitle:"Image to PDF",toolDescription:"Select images, order them, and generate a PDF.",get isLoading(){return e(r)},set isLoading(t){l(r,t)},get errorMessage(){return e(f)},set errorMessage(t){l(f,t)},get hasImage(){return e(E)},set hasImage(t){l(E,t)},$$slots:{"toolbar-left":(t,m)=>{var i=_e();w(t,i)},"toolbar-right":(t,m)=>{var i=xe(),a=P(i),o=P(a);{var d=I=>{var M=ke();K(),w(I,M)},u=(I,M)=>{{var n=g=>{var p=Ie();K(),w(g,p)},b=g=>{var p=le();O(()=>Y(p,`Generate PDF (${e(s).length??""})`)),w(g,p)};F(I,g=>{e(r)&&e(v)?g(n):g(b,!1)},M)}};F(o,I=>{e(c)?I(d):I(u,!1)})}x(a),x(i),O(()=>{a.disabled=!e(G),T(a,"title",e(G)?`Generate PDF with ${e(s).length} image(s)`:"Add images first or wait")}),D("click",a,S),w(t,i)},"main-content":(t,m)=>{var i=Ue(),a=P(i);{var o=n=>{},d=(n,b)=>{{var g=p=>{var A=ye();w(p,A)};F(n,p=>{e(r)&&e(v)&&p(g)},b)}};F(a,n=>{e(r)&&!e(v)?n(o):n(d,!1)})}var u=L(a,2);{var I=n=>{var b=Pe();ce(b,7,()=>e(s),g=>g.id,(g,p,A)=>{const re=X(()=>e(A)===0),ie=X(()=>e(A)===e(s).length-1);we(g,{get preview(){return e(p)},get isFirst(){return e(re)},get isLast(){return e(ie)},get disabled(){return e(y)},$$events:{remove:H,move:j}})}),x(b),w(n,b)},M=(n,b)=>{{var g=p=>{var A=Le();w(p,A)};F(n,p=>{e(r)||p(g)},b)}};F(u,n=>{e(v)?n(I):n(M,!1)})}x(i),w(t,i)},"sidebar-content":(t,m)=>{var i=ze(),a=J(i),o=L(P(a),2),d=P(o),u=L(d,2),I=P(u);x(u),x(o),x(a);var M=L(a,2);{var n=b=>{ue(b,{get message(){return e(f)},context:"sidebar"})};F(M,b=>{e(f)&&b(n)})}O(()=>{d.disabled=e(y),u.disabled=e(y)||!e(v),Y(I,`Clear All (${e(s).length??""})`)}),D("click",d,Q),D("click",u,C),w(t,i)}},$$legacy:!0});var W=L(Z,2);fe(W,t=>l(U,t),()=>e(U)),O(()=>W.disabled=e(r)||e(c)),D("change",W,R),w(N,$),ae()}export{He as component};
