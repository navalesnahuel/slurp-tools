import{t as f,a as b,b as ot}from"../chunks/B9q02PmC.js";import"../chunks/CEYA472p.js";import{X as rt,Y as g,Z as X,_ as st,$ as it,q as _,a0 as lt,a1 as nt,d as t,e as pt,a2 as n,a3 as p,a5 as F,a4 as c,a6 as ct}from"../chunks/CkTvmw98.js";import{h as vt,e as h,s as Y}from"../chunks/l61C7KQG.js";import{i as I}from"../chunks/lPEFebrr.js";import{r as dt,a as q}from"../chunks/B1tgAyqo.js";import{s as mt}from"../chunks/D0lxRREg.js";import{F as ut,H as bt,D as gt,b as _t}from"../chunks/Dfkrt3rs.js";import{i as ft}from"../chunks/DNmyc9OO.js";import{s as kt,a as yt}from"../chunks/BoBM9_cA.js";import{a as ht}from"../chunks/DnHmEvXm.js";import{i as x,I as $t}from"../chunks/D7iErLRr.js";import{c as Rt}from"../chunks/D2J15UbQ.js";var St=f('<div slot="toolbar-left" class="svelte-p66pkc"><span class="toolbar-label svelte-p66pkc">Rotator</span></div>'),xt=f('<span class="button-spinner svelte-p66pkc"></span> Applying...',1),At=f('<div slot="toolbar-right" class="svelte-p66pkc"><button class="apply-button button-like toolbar-button svelte-p66pkc"><!></button></div>'),Et=f('<div class="img-container svelte-p66pkc"><img class="preview-image svelte-p66pkc"></div>'),Ft=f('<p class="placeholder-text svelte-p66pkc">Select an image to start.</p>'),It=f('<div slot="main-content" class="rotate-main-content svelte-p66pkc"><!></div>'),qt=f('<div class="sidebar-error-container svelte-p66pkc"><p class="error-message sidebar-error svelte-p66pkc"> </p></div>'),Lt=f('<!> <div class="sidebar-section section-rotate svelte-p66pkc"><h4 class="h4-maroon svelte-p66pkc">Rotation</h4> <div class="control-item rotation-slider-group svelte-p66pkc"><label for="rotation-slider" class="svelte-p66pkc">Angle</label> <div class="slider-container svelte-p66pkc"><input id="rotation-slider" type="range" min="-180" max="180" step="1" class="rotation-slider svelte-p66pkc"> <span class="rotation-value svelte-p66pkc"> </span></div></div> <div class="control-item quick-rotate-buttons svelte-p66pkc"><button class="button-like quick-button svelte-p66pkc">-90°</button> <button class="button-like quick-button svelte-p66pkc">0°</button> <button class="button-like quick-button svelte-p66pkc">+90°</button> <button class="button-like quick-button svelte-p66pkc">180°</button></div></div> <!> <!> <!>',1);function Zt(Z,j){rt(j,!1);const[z,G]=kt(),J=()=>yt(x,"$imageEditorStore",z),L=_(),U=_();let $=_(0),d=_(),A=_(),s=_(),l=_(),D=_();const K=x.subscribe(e=>{g(d,e.imageUUID),g(A,e.imageUrl),g(s,e.isLoading),g(l,e.isApplying),g(D,e.errorMessage)});function O(e){if(!e.target)return;const m=e.target,r={width:m.naturalWidth,height:m.naturalHeight};x.imageLoadComplete(r)}function Q(){x.imageLoadError("Error: Failed to load image preview.")}function E(e){t(s)||t(l)||g($,e)}async function V(){if(!t(d)||t(s)||t(l))return;const e=Number(t($));isNaN(e)||await x.applyFilter(m=>Rt(m,e),`Rotate ${e}°`)}ht(()=>{K(),x.cleanupBlobUrl()}),X(()=>(t(d),t(s),t(l)),()=>{g(L,!!t(d)&&!t(s)&&!t(l))}),X(()=>t(D),()=>{g(U,t(D))}),st(),ft(),vt(e=>{lt.title="Image Rotator - Slurp Tools"}),$t(Z,{toolTitle:"Image Rotator",toolDescription:"Select an image to rotate it.",$$slots:{"toolbar-left":(e,m)=>{var r=St();b(e,r)},"toolbar-right":(e,m)=>{var r=At(),v=p(r),R=p(v);{var k=o=>{var a=xt();ct(),b(o,a)},i=o=>{var a=ot("Apply Rotate");b(o,a)};I(R,o=>{t(l)?o(k):o(i,!1)})}c(v),c(r),F(()=>{v.disabled=!t(L),q(v,"title",t(L)?`Apply ${t($)}° rotation`:"Load an image first")}),h("click",v,V),b(e,r)},"main-content":(e,m)=>{var r=It(),v=p(r);{var R=i=>{var o=Et(),a=p(o);let u;c(o),F(()=>{q(a,"src",t(A)),q(a,"alt",J().originalFilename||"Image to rotate"),q(a,"key",t(A)),u=mt(a,"",u,{opacity:t(s)?.5:1})}),h("load",a,O),h("error",a,Q),b(i,o)},k=(i,o)=>{{var a=u=>{var P=Ft();b(u,P)};I(i,u=>{t(s)||u(a)},o)}};I(v,i=>{t(A)?i(R):i(k,!1)})}c(r),b(e,r)},"sidebar-content":(e,m)=>{const r=pt(()=>m.openFilePicker);var v=Lt(),R=nt(v);ut(R,{$$events:{openFilePicker(...y){var S;(S=t(r))==null||S.apply(this,y)}}});var k=n(R,2),i=n(p(k),2),o=n(p(i),2),a=p(o);dt(a);var u=n(a,2),P=p(u);c(u),c(o),c(i);var M=n(i,2),w=p(M),N=n(w,2),H=n(N,2),C=n(H,2);c(M),c(k);var T=n(k,2);bt(T,{});var B=n(T,2);gt(B,{});var tt=n(B,2);{var et=y=>{var S=qt(),W=p(S),at=p(W,!0);c(W),c(S),F(()=>Y(at,t(U))),b(y,S)};I(tt,y=>{t(U)&&y(et)})}F(()=>{a.disabled=t(s)||t(l)||!t(d),Y(P,`${t($)??""}°`),w.disabled=t(s)||t(l)||!t(d),N.disabled=t(s)||t(l)||!t(d),H.disabled=t(s)||t(l)||!t(d),C.disabled=t(s)||t(l)||!t(d)}),_t(a,()=>t($),y=>g($,y)),h("click",w,()=>E(-90)),h("click",N,()=>E(0)),h("click",H,()=>E(90)),h("click",C,()=>E(180)),b(e,v)}}}),it(),G()}export{Zt as component};
